const initSlider1 = () => {
    const imageList1 = document.querySelector(".photos1 .slider-wrapper .image-list");
    const slideButtons1 = document.querySelectorAll(".photos1 .slider-wrapper .slide-button");
    const sliderScrollbar1 = document.querySelector(".photos1 .slider-scrollbar");
    const scrollbarThumb1 = document.querySelector(".photos1 .scrollbar-thumb");

    const imageList2 = document.querySelector(".photos2 .slider-wrapper .image-list");
    const slideButtons2 = document.querySelectorAll(".photos2 .slider-wrapper .slide-button");
    const sliderScrollbar2 = document.querySelector(".photos2 .slider-scrollbar");
    const scrollbarThumb2 = document.querySelector(".photos2 .scrollbar-thumb");

    const maxScrollLeft1 = imageList1.scrollWidth - imageList1.clientWidth -5;
    const maxScrollLeft2 = imageList2.scrollWidth - imageList2.clientWidth -5;

    scrollbarThumb.addEventListener("mousedown", (e) => {
        const startX = e.clientX;
        const thumbPosition1 = scrollbarThumb1.offsetLeft;
        const thumbPosition2 = scrollbarThumb2.offsetLeft;

        const handleMouseMove = (e) => {
            const deltaX = e.clientX - startX;
            const newThumbPosition1 = thumbPosition1 + deltaX;
            const maxThumbPosition1 = sliderScrollbar1.getBoundingClientRect().width - scrollbarThumb1.offsetWidth;

            const newThumbPosition2 = thumbPosition2 + deltaX;
            const maxThumbPosition2 = sliderScrollbar2.getBoundingClientRect().width - scrollbarThumb2.offsetWidth;

            const boundedPosition1 = Math.max(0, Math.min(maxThumbPosition1, newThumbPosition1));
            const scrollPosition1 = (boundedPosition1 / maxThumbPosition1) * maxScrollLeft1;

            const boundedPosition2 = Math.max(0, Math.min(maxThumbPosition2, newThumbPosition2));
            const scrollPosition2 = (boundedPosition2 / maxThumbPosition2) * maxScrollLeft2;

            scrollbarThumb1.style.left = `${boundedPosition1}px`;
            imageList1.scrollLeft = scrollPosition1;

            scrollbarThumb2.style.left = `${boundedPosition2}px`;
            imageList2.scrollLeft = scrollPosition2;
        }

        const handleMouseUp = (  ) => {
            document.removeEventListener("mousemove", handleMouseMove);
            document.removeEventListener("mouseup", handleMouseUp);
        }

        document.addEventListener("mousemove", handleMouseMove);
        document.addEventListener("mouseup", handleMouseUp);

    })

    slideButtons1.forEach(button => {
        button.addEventListener("click", () => {
            const direction = button.id === "prev-slide" ? -1 : 1;
            const scrollAmount = imageList1.clientWidth * direction;
            imageList1.scrollBy({ left: scrollAmount, behavior: "smooth" })
        });
    });

    slideButtons2.forEach(button => {
        button.addEventListener("click", () => {
            const direction = button.id === "prev-slide" ? -1 : 1;
            const scrollAmount = imageList2.clientWidth * direction;
            imageList2.scrollBy({ left: scrollAmount, behavior: "smooth" })
        });
    });

    const handleSlideButtons = () => {
        slideButtons1[0].style.display = imageList1.scrollLeft <= 0 ? "none" : "block";
        slideButtons1[1].style.display = imageList1.scrollLeft >= maxScrollLeft1 ? "none" : "block"; 
        slideButtons2[0].style.display = imageList2.scrollLeft <= 0 ? "none" : "block";
        slideButtons2[1].style.display = imageList2.scrollLeft >= maxScrollLeft2 ? "none" : "block"; 
    }

    const updateScrollThumbPosition = () => {
        const scrollPosition1 = imageList1.scrollLeft;
        const thumbPosition1 = (scrollPosition1 / maxScrollLeft1) * (sliderScrollbar1.clientWidth - scrollbarThumb1.offsetWidth);
        const scrollPosition2 = imageList2.scrollLeft;
        const thumbPosition2 = (scrollPosition2 / maxScrollLeft2) * (sliderScrollbar2.clientWidth - scrollbarThumb2.offsetWidth);
        
        
        scrollbarThumb1.style.left = `${thumbPosition1}px`;
        scrollbarThumb2.style.left = `${thumbPosition2}px`;
        
    }

    imageList1.addEventListener("scroll", () => {
        handleSlideButtons();
        updateScrollThumbPosition();
    })
    imageList2.addEventListener("scroll", () => {
        handleSlideButtons();
        updateScrollThumbPosition();
    })
}




window.addEventListener("load", initSlider1);
